<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>IT Login</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div class="card" style="max-width:360px;margin:80px auto">

<h2 id="title">üîê ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h2>

<input id="user" placeholder="Username">
<input id="pass" type="password" placeholder="Password">

<button onclick="login()">Login</button>

<p id="msg" style="color:red"></p>

<p style="text-align:center;margin-top:10px">
<span id="toggleText">
‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ?
<a href="#" onclick="showRegister()">‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</a>
</span>
</p>

</div>

<script src="js/api.js"></script>
<script>
let mode="login";

function showRegister(){
 mode="register";
 title.innerText="üìù ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô";
 toggleText.innerHTML=`‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏•‡πâ‡∏ß?
 <a href="#" onclick="showLogin()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a>`;
}

function showLogin(){
 mode="login";
 title.innerText="üîê ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö";
 toggleText.innerHTML=`‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ?
 <a href="#" onclick="showRegister()">‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</a>`;
}

function login(){
 if(!user.value||!pass.value)return;
 apiPost({
  action: mode==="login"?"login":"register",
  user:user.value,
  pass:pass.value
 }).then(res=>{
  if(res.success){
   localStorage.setItem("it_token",res.token);
   location.href="index.html";
  }else{
   msg.innerText=res.message||"‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à";
  }
 });
}
</script>
</body>
</html>
