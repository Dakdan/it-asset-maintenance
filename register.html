<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Register IT</title>
<style>
body{
  background:#fce4ec;
  font-family:Segoe UI,sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  margin:0;
}
.box{
  background:#fff;
  width:360px;
  padding:25px;
  border-radius:12px;
  box-shadow:0 8px 20px rgba(0,0,0,.15);
}
h2{
  text-align:center;
  margin-bottom:20px;
  color:#ff5fa2;
}
input,button{
  width:100%;
  padding:10px;
  margin-top:10px;
  border-radius:6px;
  border:1px solid #ddd;
  font-size:14px;
}
button{
  background:#ff5fa2;
  color:#fff;
  font-weight:bold;
  border:none;
  cursor:pointer;
}
button:disabled{
  opacity:.6;
}
.spinner{
  display:none;
  text-align:center;
  margin-top:15px;
}
.spinner::after{
  content:'';
  width:24px;
  height:24px;
  border:4px solid #f3f3f3;
  border-top:4px solid #ff5fa2;
  border-radius:50%;
  display:inline-block;
  animation:spin 1s linear infinite;
}
@keyframes spin{
  0%{transform:rotate(0deg)}
  100%{transform:rotate(360deg)}
}
.msg{
  text-align:center;
  margin-top:10px;
  font-size:14px;
}
a{
  display:block;
  text-align:center;
  margin-top:15px;
  color:#555;
  text-decoration:none;
}
</style>
</head>
<body>

<div class="box">
  <h2>üìù ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô IT</h2>

  <input id="name" placeholder="‡∏ä‡∏∑‡πà‡∏≠ - ‡∏™‡∏Å‡∏∏‡∏•">
  <input id="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">
  <input id="position" placeholder="‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á (‡πÄ‡∏ä‡πà‡∏ô IT Support)">

  <button id="btn" onclick="register()">‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</button>

  <div class="spinner" id="loading"></div>
  <div class="msg" id="msg"></div>

  <a href="?page=login">‚¨Ö ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤ Login</a>
</div>

<script>
const API = "https://script.google.com/macros/s/AKfycbzNSgpYNigJX7W-RUPq8SLN4e687pE55p72KsbM-nWFcPefKDhjzYAflsm78i42IW7qrw/exec";

function loading(on){
  document.getElementById('loading').style.display = on?'block':'none';
  document.getElementById('btn').disabled = on;
}

function register(){
  const name = document.getElementById('name').value.trim();
  const email = document.getElementById('email').value.trim();
  const password = document.getElementById('password').value.trim();
  const position = document.getElementById('position').value.trim();
  const msg = document.getElementById('msg');

  if(!name || !email || !password){
    msg.innerText = '‚ö† ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö';
    return;
  }

  loading(true);
  msg.innerText = '';

  fetch(API,{
    method:'POST',
    body:JSON.stringify({
      action:'registerIT',
      name,
      email,
      password,
      position
    })
  })
  .then(r=>r.json())
  .then(res=>{
    if(res.success){
      msg.innerText = '‚úÖ ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Email ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô';
    }else{
      msg.innerText = '‚ùå '+(res.message||'‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
    }
  })
  .catch(()=>{
    msg.innerText = '‚ùå ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏±‡∏î‡∏Ç‡πâ‡∏≠‡∏á';
  })
  .finally(()=>loading(false));
}
</script>

</body>
</html>
